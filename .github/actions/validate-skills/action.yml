name: 'Validate Skills'
description: 'Validates skill structure and frontmatter'

runs:
  using: composite
  steps:
    - name: Validate Skills Structure
      shell: bash
      run: |
        echo "ğŸ” Validating skills..."
        failed=0

        for skill in packages/skills-catalog/skills/*/*/; do
          [ -d "$skill" ] || continue
          
          skill_name=$(basename "$skill")
          category=$(basename "$(dirname "$skill")")

          if [ ! -f "$skill/SKILL.md" ]; then
            echo "âŒ $category/$skill_name: Missing SKILL.md"
            failed=1
            continue
          fi

          if ! head -1 "$skill/SKILL.md" | grep -q "^---"; then
            echo "âŒ $category/$skill_name: Missing frontmatter (---) in SKILL.md"
            failed=1
            continue
          fi

          echo "âœ… $category/$skill_name"
        done

        [ $failed -eq 0 ] || exit 1
        echo "âœ… All skills valid"
